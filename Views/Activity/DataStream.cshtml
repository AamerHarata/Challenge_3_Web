@using Challenge_3_Web.Enum
@* @model IEnumerable<RowData> *@
@model IEnumerable<Window>


@{
    ViewBag.Title = "title";
    Layout = "_Layout";
}

<div class="text-center">
    <h4 class="display-4">Data Stream</h4>
    <div class="flex-column">
        @Html.DropDownList(" " ,
            new SelectList(Enum.GetValues(typeof(Activity))), "All Data",
            new {@class = "form-control", @style="width: 20%; display:inline-block", @id="activity-selected"})
        <button class="btn btn-danger" id="delete-btn" style="display: inline-block">Delete All Data</button>
        <button class="btn btn-success" id="download-btn" style="display: inline-block">Download Data</button>
    </div>
    <br/><hr/>
    <table class="table table-success">
        <tr>
            @* <th>Gr. Nr.</th> *@
            @* <th>xAco</th> *@
            @* <th>yAco</th> *@
            @* <th>xAco</th> *@
            @* <th>xGyro</th> *@
            @* <th>yGyro</th> *@
            @* <th>zGyro</th> *@
            @* <th>xLinAco</th> *@
            @* <th>yLinAco</th> *@
            @* <th>zLinAco</th> *@
            @* <th>xMag</th> *@
            @* <th>yMag</th> *@
            @* <th>zMag</th> *@
            @* <th>Activity</th> *@
            <th>Min</th>
            <th>Max</th>
            <th>Mean</th>
            <th>Mode</th>
            <th>Std.</th>
            <th>Activity</th>
        </tr>
    
        @foreach (var rowData in Model)
        {
            <tr>
                @* <td>@rowData.GroupNumber</td> *@
                @* <td>@Math.Round(rowData.xAco, 5)</td> *@
                @* <td>@Math.Round(rowData.yAco, 5)</td> *@
                @* <td>@Math.Round(rowData.zAco, 5)</td> *@
                @* <td>@Math.Round(rowData.xGyro, 5)</td> *@
                @* <td>@Math.Round(rowData.yGyro, 5)</td> *@
                @* <td>@Math.Round(rowData.zGyro, 5)</td> *@
                @* <td>@Math.Round(rowData.xLinAco, 5)</td> *@
                @* <td>@Math.Round(rowData.yLinAco, 5)</td> *@
                @* <td>@Math.Round(rowData.zLinAco, 5)</td> *@
                @* <td>@Math.Round(rowData.xMag, 5)</td> *@
                @* <td>@Math.Round(rowData.yMag, 5)</td> *@
                @* <td>@Math.Round(rowData.zMag, 5)</td> *@
                <td>@rowData.MinAcoSMV</td>
                <td>@rowData.MaxAcoSMV</td>
                <td>@rowData.MeanAcoSMV</td>
                <td>@rowData.ModeAcoSMV</td>
                <td>@rowData.StdAcoSMV</td>
                <td>@rowData.Activity</td>
            </tr>
        }
    
    
    
    </table>
</div>

@section Scripts
{
    <script>
        $(document).ready(function() {
            $("#download-btn").unbind().bind("click",
                function() {
                    const selected = $("#activity-selected").find(":selected").val();

                    location.href = `/saveData/${selected}`;

//                    $.ajax({
//                        type: "GET",
//                        url: "/SaveData",
//                        data: { activity: selected },
//                        success: function(response) {
//                            console.log(response);
//                        }
//                    });

                });


            $("#delete-btn").unbind().bind("click",
                function() {
                    const selected = $("#activity-selected").find(":selected").val();

                    location.href = `/DeleteData/${selected}`;

                });
        })
    </script>
}
